import unittest

from . import cli


class TestOptions(unittest.TestCase):

    def setUp(self):
        self.maxDiff = None

    def test_radii_expressions(self):
        cli.check_output(
            self, 'pyrandomsearch.pyrandomsearch',
            args=[
                '--rng-seed=0',
                '--radii=10*0.1,math.sqrt(9999)',
                'python -c "print(({})**2+({})**2)"',
            ],
            stdin='''\
# score x y
## this is a comment
32 4 4
''',
            expected_stdout='''\
## Existing points:
32.0 4.0 4.0
## New points:
6247.18642166 4.559075211394427 -78.90754878257324
2698.99388368 3.121968829647678 51.85795208357151
18.488146437 3.0025081860319616 -3.077838694577232
10176.3111924 3.2132783913469902 -100.82651454030957
137.989139152 2.013299934765276 11.5730619338287
3338.86246352 3.840423561189131 -57.65512648838501
9018.249126 2.8037966379317183 94.92306279513049
5014.7394692 2.266562791343242 -70.77854309260111
3240.16566039 3.8459807590254584 -56.792377062310514
9227.46718551 3.3719014789647597 -96.0005076336876
8081.93294876 2.63352169795194 89.86098993572186
## Best point: 18.488146437 3.0025081860319616 -3.077838694577232
''')
